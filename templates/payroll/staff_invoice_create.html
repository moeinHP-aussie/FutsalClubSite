{% extends "base.html" %}
{% block title %}ÙØ§Ú©ØªÙˆØ± Ø¯Ø³ØªÛŒ Ø¬Ø¯ÛŒØ¯{% endblock %}
{% block nav_finance %}active{% endblock %}

{% block breadcrumb %}
  <span class="sep">â€º</span>
  <a href="{% url 'payroll:finance-dashboard' %}" style="text-decoration:none;color:inherit">Ù…Ø§Ù„ÛŒ</a>
  <span class="sep">â€º</span>
  <a href="{% url 'payroll:staff-invoice-list' %}" style="text-decoration:none;color:inherit">ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ÛŒ Ø¯Ø³ØªÛŒ</a>
  <span class="sep">â€º</span><span class="cur">Ø¬Ø¯ÛŒØ¯</span>
{% endblock %}

{% block content %}
<div style="max-width:560px">
  <h1 style="font-size:1.1rem;font-weight:900;color:var(--navy);margin-bottom:1.25rem">ğŸ“„ ØµØ¯ÙˆØ± ÙØ§Ú©ØªÙˆØ± Ø¯Ø³ØªÛŒ</h1>

  {% if errors %}
  <div style="background:#fee2e2;border-radius:8px;padding:.75rem 1rem;margin-bottom:1rem;font-size:.85rem;color:#b91c1c">
    {% for field, err in errors.items %}
    <div>{{ err }}</div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="card">
    <form method="post" style="padding:1.25rem">
      {% csrf_token %}

      <div style="margin-bottom:.85rem">
        <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø¯Ø±ÛŒØ§ÙØªâ€ŒÚ©Ù†Ù†Ø¯Ù‡ *</label>
        <select name="recipient_id" required
                style="width:100%;padding:.55rem .75rem;border:1.5px solid var(--surface-2);border-radius:8px;font-family:inherit;font-size:.85rem">
          <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±...</option>
          {% for u in users %}
          <option value="{{ u.pk }}" {% if prev.recipient_id == u.pk|stringformat:"s" %}selected{% endif %}>
            {{ u.get_full_name }} ({{ u.username }})
            {% if u.is_coach %} â€” Ù…Ø±Ø¨ÛŒ{% endif %}
            {% if u.is_technical_director %} â€” Ù…Ø¯ÛŒØ± ÙÙ†ÛŒ{% endif %}
            {% if u.is_finance_manager %} â€” Ù…Ø¯ÛŒØ± Ù…Ø§Ù„ÛŒ{% endif %}
          </option>
          {% endfor %}
        </select>
      </div>

      <div style="margin-bottom:.85rem">
        <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø¹Ù†ÙˆØ§Ù† ÙØ§Ú©ØªÙˆØ± *</label>
        <input type="text" name="title" required
               value="{{ prev.title|default:'' }}"
               placeholder="Ù…Ø«Ø§Ù„: Ø­Ù‚ Ø¹Ø¶ÙˆÛŒØª Ø³Ø§Ù„Ø§Ù†Ù‡ØŒ Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø±Ø¯Ùˆ..."
               style="width:100%;padding:.55rem .75rem;border:1.5px solid var(--surface-2);border-radius:8px;font-family:inherit;font-size:.85rem">
      </div>

      <div style="margin-bottom:.85rem">
        <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù…Ø¨Ù„Øº (Ø±ÛŒØ§Ù„) *</label>
        <input type="number" name="amount" required min="1000"
               value="{{ prev.amount|default:'' }}"
               placeholder="Ù…Ø«Ø§Ù„: 5000000"
               style="width:100%;padding:.55rem .75rem;border:1.5px solid var(--surface-2);border-radius:8px;font-family:monospace;font-size:.875rem">
      </div>

      <div style="margin-bottom:1.25rem">
        <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø´Ø±Ø­ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
        <textarea name="description" rows="3" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ±..."
                  style="width:100%;padding:.55rem .75rem;border:1.5px solid var(--surface-2);border-radius:8px;font-family:inherit;font-size:.85rem;resize:vertical">{{ prev.description|default:'' }}</textarea>
      </div>

      <div style="background:#f0f9ff;border-radius:8px;padding:.75rem 1rem;margin-bottom:1rem;font-size:.8rem;color:#0369a1">
        ğŸ’¡ Ù¾Ø³ Ø§Ø² ØµØ¯ÙˆØ±ØŒ Ø§Ø¹Ù„Ø§Ù† Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù…Ù‚ØµØ¯ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø§ÛŒØ¯ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ù…Ø§Ù„ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´ÙˆØ¯.
      </div>

      <div style="display:flex;gap:.6rem;justify-content:flex-end">
        <a href="{% url 'payroll:staff-invoice-list' %}" class="btn btn-outline">Ø§Ù†ØµØ±Ø§Ù</a>
        <button type="submit" class="btn btn-amber">ğŸ“¤ ØµØ¯ÙˆØ± ÙØ§Ú©ØªÙˆØ±</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}