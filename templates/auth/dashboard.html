{% extends "base.html" %}
{% block title %}Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ â€” Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙÙˆØªØ³Ø§Ù„{% endblock %}
{% block nav_dashboard %}active{% endblock %}

{% block breadcrumb %}
  <span class="cur">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</span>
{% endblock %}

{% block content %}

{% if user.is_technical_director %}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ± ÙÙ†ÛŒ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="page-header">
  <div>
    <h1>ğŸ‘‹ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ {{ user.get_full_name|default:user.username }}</h1>
    <p>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª ÙÙ†ÛŒ Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙÙˆØªØ³Ø§Ù„</p>
  </div>
</div>

<div class="grid-auto" style="margin-bottom:1.5rem">
  <div class="stat-card green">
    <div class="stat-label">Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† ÙØ¹Ø§Ù„</div>
    <div class="stat-value">{{ total_players|default:0 }}</div>
    <span class="stat-icon">âš½</span>
  </div>
  <div class="stat-card amber">
    <div class="stat-label">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯</div>
    <div class="stat-value">{{ pending_players|default:0 }}</div>
    <span class="stat-icon">â³</span>
  </div>
  <div class="stat-card navy">
    <div class="stat-label">Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</div>
    <div class="stat-value">{{ total_categories|default:0 }}</div>
    <span class="stat-icon">ğŸ“š</span>
  </div>
  <div class="stat-card teal">
    <div class="stat-label">Ø¢Ø±Ø´ÛŒÙˆâ€ŒØ´Ø¯Ù‡</div>
    <div class="stat-value">{{ archived_players|default:0 }}</div>
    <span class="stat-icon">ğŸ—„ï¸</span>
  </div>
</div>

{% if pending_players > 0 %}
<div class="alert alert-warning mb-2">
  <span class="alert-icon">â³</span>
  <div>
    <strong>{{ pending_players }} Ù…ØªÙ‚Ø§Ø¶ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ</strong>
    <div style="margin-top:.25rem">
      <a href="{% url 'registration:applicant-list' %}" class="btn btn-amber btn-sm">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ â†’</a>
    </div>
  </div>
</div>
{% endif %}

{% if recent_players %}
<div class="card">
  <div class="card-header">
    <span class="card-title">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø´Ø¯Ù‡</span>
    <a href="{% url 'registration:applicant-list' %}" class="btn btn-outline btn-sm">Ù‡Ù…Ù‡ â†</a>
  </div>
  <div class="table-wrap">
    <table class="data-table">
      <thead><tr><th>Ù†Ø§Ù…</th><th>Ú©Ø¯Ù…Ù„ÛŒ</th><th>ÙˆØ¶Ø¹ÛŒØª</th><th>ØªØ§Ø±ÛŒØ®</th></tr></thead>
      <tbody>
        {% for p in recent_players %}
        <tr>
          <td><strong>{{ p.first_name }} {{ p.last_name }}</strong></td>
          <td style="font-family:monospace;font-size:.82rem">{{ p.national_id }}</td>
          <td>
            {% if p.status == 'pending' %}<span class="badge badge-amber">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
            {% elif p.status == 'approved' %}<span class="badge badge-green">ØªØ£ÛŒÛŒØ¯</span>
            {% else %}<span class="badge badge-red">Ø±Ø¯</span>{% endif %}
          </td>
          <td style="font-size:.82rem;color:var(--text-muted)">{{ p.registration_date|date:"Y/m/d" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endif %}

{% elif user.is_finance_manager %}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„ÛŒ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="page-header">
  <div>
    <h1>ğŸ’° Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„ÛŒ</h1>
    <p>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ {{ user.get_full_name|default:user.username }}</p>
  </div>
  <a href="{% url 'payroll:finance-dashboard' %}" class="btn btn-primary">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„ÛŒ Ú©Ø§Ù…Ù„ â†’</a>
</div>

<div class="grid-auto" style="margin-bottom:1.5rem">
  <div class="stat-card amber">
    <div class="stat-label">ÙØ§Ú©ØªÙˆØ± Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
    <div class="stat-value">{{ pending_invoices|default:0 }}</div>
    <span class="stat-icon">ğŸ§¾</span>
  </div>
  <div class="stat-card red">
    <div class="stat-label">Ø¨Ø¯Ù‡Ú©Ø§Ø±Ø§Ù†</div>
    <div class="stat-value">{{ total_debt|default:0 }}</div>
    <span class="stat-icon">âš ï¸</span>
  </div>
  <div class="stat-card teal">
    <div class="stat-label">Ø­Ù‚ÙˆÙ‚ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
    <div class="stat-value">{{ pending_salaries|default:0 }}</div>
    <span class="stat-icon">ğŸ’³</span>
  </div>
</div>

{% elif user.is_coach %}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø±Ø¨ÛŒ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="page-header">
  <div>
    <h1>ğŸ¯ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø±Ø¨ÛŒ</h1>
    <p>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ {{ user.get_full_name|default:user.username }}</p>
  </div>
</div>

<div class="grid-auto" style="margin-bottom:1.5rem">
  <div class="stat-card green">
    <div class="stat-label">Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† ØªØ­Øª Ù†Ø¸Ø±</div>
    <div class="stat-value">{{ total_players_coached|default:0 }}</div>
    <span class="stat-icon">âš½</span>
  </div>
  <div class="stat-card navy">
    <div class="stat-label">Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</div>
    <div class="stat-value">{{ my_categories.count|default:0 }}</div>
    <span class="stat-icon">ğŸ“š</span>
  </div>
</div>

<div style="display:flex;gap:.75rem;flex-wrap:wrap">
  <a href="{% url 'attendance:category-list' %}" class="btn btn-primary">ğŸ“‹ Ø«Ø¨Øª Ø­Ø¶ÙˆØ±</a>
  <a href="{% url 'exercises:gallery' %}" class="btn btn-amber">ğŸ¯ Ù…Ø®Ø²Ù† ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§</a>
  <a href="{% url 'comms:announcement-list' %}" class="btn btn-outline">ğŸ“¢ Ø§Ø¹Ù„Ø§Ù†Ø§Øª</a>
</div>

{% elif user.is_player %}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¨Ø§Ø²ÛŒÚ©Ù† â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="page-header">
  <div>
    <h1>âš½ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ {{ user.first_name }}</h1>
    <p>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø´Ø®ØµÛŒ Ø´Ù…Ø§</p>
  </div>
</div>

{% if my_pending_invoices > 0 %}
<div class="alert alert-warning mb-2">
  <span class="alert-icon">ğŸ§¾</span>
  <div>
    <strong>{{ my_pending_invoices }} ÙØ§Ú©ØªÙˆØ± Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ†Ø´Ø¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯</strong>
    <div style="margin-top:.25rem">
      <a href="{% url 'payroll:invoice-list-player' %}" class="btn btn-amber btn-sm">Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ±Ù‡Ø§</a>
    </div>
  </div>
</div>
{% endif %}

<div style="display:flex;gap:.75rem;flex-wrap:wrap">
  <a href="{% url 'comms:notification-list' %}" class="btn btn-outline">ğŸ”” Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ù†</a>
  <a href="{% url 'comms:announcement-list' %}" class="btn btn-outline">ğŸ“¢ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§</a>
</div>

{% else %}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…ØªÙ‚Ø§Ø¶ÛŒ Ø¬Ø¯ÛŒØ¯ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div style="text-align:center;padding:3rem">
  <div style="font-size:3rem;margin-bottom:1rem">â³</div>
  <h2>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø´Ù…Ø§ Ø¯Ø± Ø¯Ø³Øª Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø³Øª</h2>
  <p style="color:var(--text-muted);margin-top:.75rem">
    Ù…Ø¯ÛŒØ± ÙÙ†ÛŒ Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ø´Ù…Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ø®ÙˆØ§Ù‡Ø¯ Ú©Ø±Ø¯.
  </p>
</div>
{% endif %}

{% endblock %}
