{% extends "base.html" %}
{% block title %}ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª {{ player.first_name }} {{ player.last_name }}{% endblock %}
{% block nav_players %}active{% endblock %}

{% block breadcrumb %}
  <span class="sep">â€º</span>
  <a href="{% url 'training:player-profile' player.pk %}" style="text-decoration:none;color:inherit">{{ player.first_name }} {{ player.last_name }}</a>
  <span class="sep">â€º</span><span class="cur">ÙˆÛŒØ±Ø§ÛŒØ´</span>
{% endblock %}

{% block content %}
<div style="max-width:700px;margin:0 auto">
  <div class="card" style="padding:0;overflow:hidden">
    <div style="height:4px;background:linear-gradient(90deg,var(--navy),var(--teal))"></div>
    <div style="padding:1.5rem 1.75rem">

      <div style="display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem">
        <div style="width:44px;height:44px;background:linear-gradient(135deg,var(--navy),var(--teal));border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:900;font-size:1rem">
          {{ player.first_name|slice:":1" }}{{ player.last_name|slice:":1" }}
        </div>
        <div>
          <h1 style="font-size:1.1rem;font-weight:900;color:var(--navy)">
            ÙˆÛŒØ±Ø§ÛŒØ´: {{ player.first_name }} {{ player.last_name }}
          </h1>
          <p style="font-size:.78rem;color:var(--text-muted);font-family:monospace">{{ player.player_id }}</p>
        </div>
      </div>

      {% if form.errors %}
      <div style="background:#fee2e2;border:1.5px solid #fca5a5;border-radius:10px;padding:.85rem 1rem;margin-bottom:1.25rem;font-size:.85rem;color:#991b1b">
        âš ï¸ {% for field in form %}{% for err in field.errors %}<div>â€¢ {{ field.label }}: {{ err }}</div>{% endfor %}{% endfor %}
      </div>
      {% endif %}

      <form method="post">
        {% csrf_token %}

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡ -->
        <div style="font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);margin-bottom:.6rem;padding-bottom:.3rem;border-bottom:1px solid var(--surface-2)">
          ğŸ‘¤ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø®ØµÛŒ
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:.8rem;margin-bottom:1rem">
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù†Ø§Ù…</label>
            {{ form.first_name }}
            {% if form.first_name.errors %}<div style="color:#ef4444;font-size:.72rem">{{ form.first_name.errors.0 }}</div>{% endif %}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
            {{ form.last_name }}
            {% if form.last_name.errors %}<div style="color:#ef4444;font-size:.72rem">{{ form.last_name.errors.0 }}</div>{% endif %}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù†Ø§Ù… Ù¾Ø¯Ø±</label>
            {{ form.father_name }}
          </div>
        </div>

        <!-- ØªÙ…Ø§Ø³ -->
        <div style="font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);margin-bottom:.6rem;padding-bottom:.3rem;border-bottom:1px solid var(--surface-2);margin-top:1.25rem">
          ğŸ“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:.8rem;margin-bottom:1rem">
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø§Ø²ÛŒÚ©Ù†</label>
            {{ form.phone }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù¾Ø¯Ø±</label>
            {{ form.father_phone }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù…Ø§Ø¯Ø±</label>
            {{ form.mother_phone }}
          </div>
        </div>
        <div style="margin-bottom:1rem">
          <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø¢Ø¯Ø±Ø³</label>
          {{ form.address }}
        </div>

        <!-- Ø¬Ø³Ù…Ø§Ù†ÛŒ -->
        <div style="font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);margin-bottom:.6rem;padding-bottom:.3rem;border-bottom:1px solid var(--surface-2);margin-top:1.25rem">
          ğŸ“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¬Ø³Ù…Ø§Ù†ÛŒ
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:.8rem;margin-bottom:1rem">
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù‚Ø¯ (cm)</label>
            {{ form.height }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">ÙˆØ²Ù† (kg)</label>
            {{ form.weight }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø¯Ø³Øª Ø¨Ø±ØªØ±</label>
            {{ form.preferred_hand }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ù¾Ø§ÛŒ Ø¨Ø±ØªØ±</label>
            {{ form.preferred_foot }}
          </div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:.8rem;margin-bottom:1rem">
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø³Ø§Ø¨Ù‚Ù‡ Ù¾Ø²Ø´Ú©ÛŒ</label>
            {{ form.medical_history }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø³Ø§Ø¨Ù‚Ù‡ Ø¢Ø³ÛŒØ¨â€ŒØ¯ÛŒØ¯Ú¯ÛŒ</label>
            {{ form.injury_history }}
          </div>
        </div>

        <!-- Ø¨ÛŒÙ…Ù‡ -->
        <div style="font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);margin-bottom:.6rem;padding-bottom:.3rem;border-bottom:1px solid var(--surface-2);margin-top:1.25rem">
          ğŸ›¡ï¸ Ø¨ÛŒÙ…Ù‡
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:.8rem;margin-bottom:1.25rem">
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">ÙˆØ¶Ø¹ÛŒØª Ø¨ÛŒÙ…Ù‡</label>
            {{ form.insurance_status }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ (Ø´Ù…Ø³ÛŒ)</label>
            {{ form.insurance_expiry_jalali }}
            <span style="font-size:.72rem;color:var(--text-muted)">Ù…Ø«Ø§Ù„: Û±Û´Û°Û´/Û°Û¶/Û³Û°</span>
            {% if form.insurance_expiry_jalali.errors %}
            <div style="font-size:.72rem;color:var(--red)">{{ form.insurance_expiry_jalali.errors.0 }}</div>
            {% endif %}
          </div>
        </div>

        <!-- Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ -->
        <div style="font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);margin-bottom:.6rem;padding-bottom:.3rem;border-bottom:1px solid var(--surface-2);margin-top:1.25rem">
          ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:.8rem;margin-bottom:1.5rem">
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">ØªØ­ØµÛŒÙ„Ø§Øª Ù¾Ø¯Ø±</label>
            {{ form.father_education }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø´ØºÙ„ Ù¾Ø¯Ø±</label>
            {{ form.father_job }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">ØªØ­ØµÛŒÙ„Ø§Øª Ù…Ø§Ø¯Ø±</label>
            {{ form.mother_education }}
          </div>
          <div>
            <label style="font-size:.82rem;font-weight:700;display:block;margin-bottom:.3rem">Ø´ØºÙ„ Ù…Ø§Ø¯Ø±</label>
            {{ form.mother_job }}
          </div>
        </div>

        <div style="display:flex;gap:.6rem;justify-content:flex-end">
          <a href="{% url 'training:player-profile' player.pk %}" class="btn btn-outline">Ø§Ù†ØµØ±Ø§Ù</a>
          <button type="submit" class="btn btn-navy">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}