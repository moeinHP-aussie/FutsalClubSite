{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙÙˆØªØ³Ø§Ù„ Ø§Ø³Ù¾Ø§Ø¯{% endblock %} | Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DESIGN SYSTEM  â€” Futsal Club Management
       Theme: Deep navy + electric amber â€” refined & athletic
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
      --navy:        #0d1b2a;
      --navy-2:      #122236;
      --navy-3:      #1a3150;
      --navy-4:      #1e3a5f;
      --amber:       #f59e0b;
      --amber-light: #fcd34d;
      --amber-dim:   #92400e;
      --teal:        #0ea5e9;
      --green:       #10b981;
      --red:         #ef4444;
      --purple:      #8b5cf6;
      --surface:     #f0f4f8;
      --surface-2:   #e2e8f0;
      --text-main:   #0f172a;
      --text-muted:  #64748b;
      --text-light:  #94a3b8;
      --white:       #ffffff;
      --sidebar-w:   260px;
      --header-h:    64px;
      --radius:      12px;
      --radius-sm:   8px;
      --shadow:      0 4px 24px rgba(13,27,42,.12);
      --shadow-lg:   0 8px 40px rgba(13,27,42,.18);
      --transition:  all .2s cubic-bezier(.4,0,.2,1);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: "Vazirmatn", Tahoma, sans-serif;
      background: var(--surface);
      color: var(--text-main);
      direction: rtl;
      min-height: 100vh;
      display: flex;
      overflow-x: hidden;
    }

    /* â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    ::-webkit-scrollbar       { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--surface-2); border-radius: 99px; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SIDEBAR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sidebar {
      width: var(--sidebar-w);
      height: 100vh; overflow: hidden;
      background: var(--navy);
      display: flex;
      flex-direction: column;
      position: fixed;
      right: 0; top: 0;
      z-index: 100;
      transition: transform .3s cubic-bezier(.4,0,.2,1);
      box-shadow: -4px 0 32px rgba(0,0,0,.3);
    }

    /* â”€â”€ Logo / Club Brand â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar-brand {
      padding: 1.25rem 1.25rem 1rem;
      border-bottom: 1px solid rgba(255,255,255,.07);
      display: flex; align-items: center; gap: .85rem;
      position: relative; overflow: hidden;
    }
    /* Ø®Ø· Ø§Ù†Ø±Ú˜ÛŒ Ù¾Ø´Øª Ù„ÙˆÚ¯Ùˆ */
    .sidebar-brand::before {
      content: "";
      position: absolute;
      top: 0; right: 0; bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, var(--amber), transparent);
    }
    .brand-icon {
      width: 44px; height: 44px;
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 16px rgba(245,158,11,.35);
      overflow: hidden;
      background: var(--white);
    }
    .brand-icon img {
      width: 100%; height: 100%; object-fit: cover; border-radius: 10px;
    }
    .brand-text { line-height: 1.2; }
    .brand-name  { font-size: .95rem; font-weight: 800; color: var(--white); }
    .brand-sub   { font-size: .7rem; color: var(--amber-light); font-weight: 500; margin-top: .15rem; }

    /* â”€â”€ User Badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .user-badge {
      margin: 1rem .75rem .25rem;
      background: rgba(255,255,255,.05);
      border-radius: var(--radius-sm);
      padding: .75rem .9rem;
      display: flex; align-items: center; gap: .75rem;
    }
    .user-avatar {
      width: 34px; height: 34px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--teal), var(--purple));
      display: flex; align-items: center; justify-content: center;
      font-size: .8rem; font-weight: 700; color: var(--white);
      flex-shrink: 0;
    }
    .user-info { overflow: hidden; }
    .user-name  { font-size: .82rem; font-weight: 700; color: var(--white); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .user-role  { font-size: .68rem; color: var(--amber-light); margin-top: .1rem; }

    /* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar-nav  { flex: 1; overflow-y: auto; padding: .5rem 0 1rem; }
    .nav-section  { padding: .75rem .9rem .3rem; }
    .nav-label    { font-size: .62rem; font-weight: 700; color: var(--text-light); text-transform: uppercase; letter-spacing: .08em; }

    .nav-item {
      display: flex; align-items: center; gap: .75rem;
      padding: .65rem 1rem;
      margin: .1rem .5rem;
      border-radius: var(--radius-sm);
      color: rgba(255,255,255,.65);
      text-decoration: none;
      font-size: .84rem; font-weight: 500;
      transition: var(--transition);
      position: relative;
    }
    .nav-item:hover {
      background: rgba(255,255,255,.07);
      color: var(--white);
    }
    .nav-item-disabled { opacity: .4; cursor: not-allowed !important; }
    .nav-item-disabled:hover { background: none !important; }
    .nav-item.active {
      background: rgba(245,158,11,.18);
      color: var(--amber-light);
      font-weight: 600;
    }
    .nav-item.active::before {
      content: "";
      position: absolute;
      right: 0; top: 25%; bottom: 25%;
      width: 3px;
      background: linear-gradient(180deg, var(--amber), var(--amber-light));
      border-radius: 99px 0 0 99px;
      box-shadow: 0 0 8px rgba(245,158,11,.6);
    }
    .nav-icon {
      width: 18px; text-align: center;
      font-size: .95rem; flex-shrink: 0;
    }
    .nav-badge {
      margin-right: auto;
      background: var(--red);
      color: var(--white);
      font-size: .62rem; font-weight: 700;
      padding: .15rem .45rem;
      border-radius: 99px;
      min-width: 18px; text-align: center;
    }

    /* â”€â”€ Sidebar Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar-footer {
      padding: .75rem;
      border-top: 1px solid rgba(255,255,255,.07);
    }
    .sidebar-footer a {
      display: flex; align-items: center; gap: .7rem;
      padding: .6rem .9rem;
      border-radius: var(--radius-sm);
      color: rgba(255,255,255,.5);
      text-decoration: none; font-size: .82rem;
      transition: var(--transition);
    }
    .sidebar-footer a:hover { background: rgba(255,255,255,.07); color: var(--red); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN LAYOUT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .main-wrapper {
      margin-right: var(--sidebar-w);
      flex: 1;
      display: flex; flex-direction: column;
      min-height: 100vh;
      overflow-y: auto;
      transition: margin-right .3s;
    }

    /* â”€â”€ Top Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .topbar {
      height: var(--header-h);
      background: var(--white);
      border-bottom: 1px solid var(--surface-2);
      display: flex; align-items: center;
      padding: 0 1.5rem;
      gap: 1rem;
      position: sticky; top: 0; z-index: 50;
      box-shadow: 0 1px 4px rgba(0,0,0,.06);
    }
    .topbar-toggle {
      display: none;
      background: none; border: none; cursor: pointer;
      font-size: 1.3rem; color: var(--text-muted);
      padding: .3rem;
    }
    .topbar-breadcrumb {
      display: flex; align-items: center; gap: .5rem;
      font-size: .85rem; color: var(--text-muted);
      flex: 1;
    }
    .topbar-breadcrumb .sep  { color: var(--surface-2); }
    .topbar-breadcrumb .cur  { color: var(--text-main); font-weight: 600; }

    .topbar-actions { display: flex; align-items: center; gap: .5rem; margin-right: auto; }

    /* â”€â”€ Notification Bell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .notif-btn {
      position: relative;
      width: 38px; height: 38px;
      border-radius: var(--radius-sm);
      background: none; border: 1px solid var(--surface-2);
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      font-size: 1rem; color: var(--text-muted);
      transition: var(--transition);
    }
    .notif-btn:hover { background: var(--surface); color: var(--navy); }
    .notif-count {
      position: absolute; top: -4px; left: -4px;
      background: var(--red); color: var(--white);
      font-size: .6rem; font-weight: 700;
      min-width: 16px; height: 16px;
      border-radius: 99px; display: flex; align-items: center; justify-content: center;
      border: 2px solid var(--white);
    }

    /* â”€â”€ Notification Dropdown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .notif-dropdown {
      position: absolute; top: calc(var(--header-h) + .5rem); left: 1rem;
      width: 340px;
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--surface-2);
      z-index: 200;
      opacity: 0; pointer-events: none; transform: translateY(-8px);
      transition: var(--transition);
      overflow: hidden;
    }
    .notif-dropdown.open { opacity: 1; pointer-events: all; transform: translateY(0); }
    .notif-header {
      padding: .9rem 1rem;
      border-bottom: 1px solid var(--surface-2);
      display: flex; align-items: center; justify-content: space-between;
    }
    .notif-header h3 { font-size: .9rem; font-weight: 700; }
    .notif-mark-all {
      font-size: .75rem; color: var(--teal); text-decoration: none;
      font-weight: 600;
    }
    .notif-list { max-height: 340px; overflow-y: auto; }
    .notif-item {
      display: flex; gap: .75rem;
      padding: .85rem 1rem;
      border-bottom: 1px solid var(--surface);
      text-decoration: none; color: inherit;
      transition: background .15s;
    }
    .notif-item:hover { background: var(--surface); }
    .notif-item.unread { background: #eff6ff; }
    .notif-dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: var(--teal); flex-shrink: 0; margin-top: .35rem;
    }
    .notif-item.read .notif-dot { background: transparent; border: 1.5px solid var(--surface-2); }
    .notif-content { font-size: .82rem; line-height: 1.5; }
    .notif-title   { font-weight: 600; color: var(--text-main); }
    .notif-msg     { color: var(--text-muted); margin-top: .15rem; }
    .notif-time    { font-size: .7rem; color: var(--text-light); margin-top: .25rem; }
    .notif-empty   { padding: 2rem 1rem; text-align: center; color: var(--text-muted); font-size: .85rem; }

    /* â”€â”€ Page Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-content { flex: 1; padding: 1.75rem; }

    /* â”€â”€ Page Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-header {
      display: flex; align-items: flex-start; justify-content: space-between;
      flex-wrap: wrap; gap: 1rem;
      margin-bottom: 1.75rem;
    }
    .page-header h1 { font-size: 1.45rem; font-weight: 800; color: var(--text-main); }
    .page-header p  { font-size: .875rem; color: var(--text-muted); margin-top: .2rem; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       COMPONENT LIBRARY
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    /* â”€â”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: 0 1px 6px rgba(0,0,0,.07);
      border: 1px solid var(--surface-2);
      overflow: hidden;
    }
    .card-header {
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--surface);
      display: flex; align-items: center; justify-content: space-between; gap: .75rem;
    }
    .card-title { font-size: .95rem; font-weight: 700; }
    .card-body  { padding: 1.25rem; }

    /* â”€â”€ Stat Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .stat-card {
      background: var(--white);
      border-radius: var(--radius);
      padding: 1.25rem;
      border: 1px solid var(--surface-2);
      position: relative; overflow: hidden;
      transition: transform .2s, box-shadow .2s;
    }
    .stat-card:hover { transform: translateY(-3px); box-shadow: 0 8px 28px rgba(13,27,42,.14); }
    .stat-card::after {
      content: "";
      position: absolute; top: 0; right: 0;
      width: 4px; height: 100%;
      border-radius: 0 var(--radius) var(--radius) 0;
    }
    .stat-card::before {
      content: "";
      position: absolute; bottom: 0; left: 0; right: 0;
      height: 3px;
      opacity: 0;
      transition: opacity .2s;
    }
    .stat-card:hover::before { opacity: 1; }
    .stat-card.navy::after   { background: var(--navy); }
    .stat-card.navy::before  { background: linear-gradient(90deg, var(--navy), var(--teal)); }
    .stat-card.amber::after  { background: var(--amber); }
    .stat-card.amber::before { background: linear-gradient(90deg, var(--amber), var(--amber-light)); }
    .stat-card.green::after  { background: var(--green); }
    .stat-card.green::before { background: linear-gradient(90deg, var(--green), #34d399); }
    .stat-card.red::after    { background: var(--red); }
    .stat-card.red::before   { background: linear-gradient(90deg, var(--red), #f87171); }
    .stat-card.teal::after   { background: var(--teal); }
    .stat-card.teal::before  { background: linear-gradient(90deg, var(--teal), #38bdf8); }
    .stat-card.purple::after { background: var(--purple); }
    .stat-card.purple::before { background: linear-gradient(90deg, var(--purple), #a78bfa); }
    .stat-label  { font-size: .78rem; color: var(--text-muted); font-weight: 500; margin-bottom: .4rem; }
    .stat-value  { font-size: 2rem; font-weight: 900; line-height: 1; }
    .stat-sub    { font-size: .75rem; color: var(--text-muted); margin-top: .3rem; }
    .stat-icon   {
      position: absolute; left: 1rem; top: 50%; transform: translateY(-50%);
      font-size: 2.2rem; opacity: .07;
      transition: opacity .2s, transform .2s;
    }
    .stat-card:hover .stat-icon { opacity: .12; transform: translateY(-50%) scale(1.1); }

    /* â”€â”€ Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: .45rem;
      padding: .55rem 1.2rem;
      border-radius: var(--radius-sm);
      border: none; cursor: pointer;
      font-family: inherit; font-size: .875rem; font-weight: 600;
      text-decoration: none; line-height: 1;
      transition: var(--transition); white-space: nowrap;
    }
    .btn:disabled { opacity: .5; pointer-events: none; }
    .btn-sm    { padding: .35rem .85rem; font-size: .8rem; }
    .btn-lg    { padding: .75rem 1.6rem; font-size: .95rem; }
    .btn-icon  { padding: .5rem; width: 36px; height: 36px; }

    .btn-primary   { background: var(--navy); color: var(--white); }
    .btn-primary:hover { background: var(--navy-3); }
    .btn-amber     { background: var(--amber); color: var(--navy); }
    .btn-amber:hover { background: var(--amber-light); }
    .btn-green     { background: var(--green); color: var(--white); }
    .btn-green:hover { filter: brightness(1.1); }
    .btn-red       { background: var(--red); color: var(--white); }
    .btn-red:hover { filter: brightness(1.1); }
    .btn-teal      { background: var(--teal); color: var(--white); }
    .btn-teal:hover { filter: brightness(1.1); }
    .btn-outline   { background: transparent; border: 1.5px solid var(--surface-2); color: var(--text-main); }
    .btn-outline:hover { background: var(--surface); }
    .btn-ghost     { background: transparent; color: var(--text-muted); }
    .btn-ghost:hover { background: var(--surface); color: var(--text-main); }

    /* â”€â”€ Badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .badge {
      display: inline-flex; align-items: center;
      padding: .2rem .6rem;
      border-radius: 99px;
      font-size: .72rem; font-weight: 700; line-height: 1;
    }
    .badge-green  { background: #d1fae5; color: #065f46; }
    .badge-red    { background: #fee2e2; color: #991b1b; }
    .badge-amber  { background: #fef3c7; color: #92400e; }
    .badge-teal   { background: #cffafe; color: #164e63; }
    .badge-navy   { background: #dbeafe; color: #1e3a8a; }
    .badge-purple { background: #ede9fe; color: #5b21b6; }
    .badge-gray   { background: var(--surface-2); color: var(--text-muted); }

    /* â”€â”€ Form Controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-group { margin-bottom: 1.1rem; }
    .form-label {
      display: block; font-size: .825rem; font-weight: 600;
      margin-bottom: .4rem; color: var(--text-main);
    }
    .form-label .req { color: var(--red); margin-right: .15rem; }
    .form-control {
      width: 100%; padding: .6rem .85rem;
      border: 1.5px solid var(--surface-2);
      border-radius: var(--radius-sm);
      font-family: inherit; font-size: .875rem; color: var(--text-main);
      background: var(--white);
      transition: border-color .15s, box-shadow .15s;
      appearance: none;
    }
    .form-control:focus {
      outline: none;
      border-color: var(--navy);
      box-shadow: 0 0 0 3px rgba(13,27,42,.1);
    }
    .form-control::placeholder { color: var(--text-light); }
    .form-hint { font-size: .75rem; color: var(--text-muted); margin-top: .3rem; }

    /* â”€â”€ Alert â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .alert {
      padding: .85rem 1rem;
      border-radius: var(--radius-sm);
      font-size: .875rem;
      display: flex; align-items: flex-start; gap: .65rem;
      border: 1px solid transparent;
    }
    .alert-icon { flex-shrink: 0; margin-top: .05rem; }
    .alert-success { background: #d1fae5; color: #065f46; border-color: #a7f3d0; }
    .alert-warning { background: #fef3c7; color: #92400e; border-color: #fde68a; }
    .alert-danger  { background: #fee2e2; color: #991b1b; border-color: #fecaca; }
    .alert-info    { background: #cffafe; color: #164e63; border-color: #a5f3fc; }

    /* â”€â”€ Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .table-wrap { overflow-x: auto; }
    table.data-table { width: 100%; border-collapse: collapse; font-size: .875rem; }
    table.data-table th {
      padding: .75rem 1rem;
      background: var(--surface);
      border-bottom: 2px solid var(--surface-2);
      font-weight: 700; text-align: right; font-size: .78rem;
      color: var(--text-muted); white-space: nowrap;
    }
    table.data-table td {
      padding: .75rem 1rem;
      border-bottom: 1px solid var(--surface);
      vertical-align: middle;
    }
    table.data-table tr:hover td { background: var(--surface); }
    table.data-table tr:last-child td { border-bottom: none; }

    /* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .toast-container {
      position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
      display: flex; flex-direction: column; gap: .5rem;
      z-index: 9999; pointer-events: none;
      width: min(400px, 90vw);
    }
    .toast {
      background: var(--navy);
      color: var(--white);
      padding: .85rem 1.2rem;
      border-radius: var(--radius);
      font-size: .875rem; font-weight: 500;
      display: flex; align-items: center; gap: .75rem;
      box-shadow: var(--shadow-lg);
      pointer-events: all;
      animation: toastIn .35s cubic-bezier(.34,1.56,.64,1) forwards;
    }
    .toast.out { animation: toastOut .25s ease forwards; }
    .toast.success { border-right: 4px solid var(--green); }
    .toast.error   { border-right: 4px solid var(--red); }
    .toast.warning { border-right: 4px solid var(--amber); }
    @keyframes toastIn  { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
    @keyframes toastOut { from { opacity:1; transform:translateY(0); }   to { opacity:0; transform:translateY(10px); } }

    /* â”€â”€ Loading Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .loading-overlay {
      position: fixed; inset: 0;
      background: rgba(13,27,42,.4);
      display: flex; align-items: center; justify-content: center;
      z-index: 9000; opacity: 0; pointer-events: none;
      transition: opacity .2s;
    }
    .loading-overlay.show { opacity: 1; pointer-events: all; }
    .spinner {
      width: 44px; height: 44px;
      border: 3px solid rgba(255,255,255,.2);
      border-top-color: var(--amber);
      border-radius: 50%;
      animation: spin .7s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ Django Messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .django-messages { padding: 0 1.75rem; margin-bottom: -.75rem; margin-top: .75rem; }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 768px) {
      .sidebar { transform: translateX(100%); }
      .sidebar.open { transform: translateX(0); }
      .main-wrapper { margin-right: 0; }
      .topbar-toggle { display: flex; }
      .page-content { padding: 1rem; }
      .notif-dropdown { width: calc(100vw - 2rem); left: 1rem; right: 1rem; }
    }

    /* â”€â”€ Utility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .flex    { display: flex; }
    .gap-1   { gap: .5rem; }
    .gap-2   { gap: 1rem; }
    .gap-3   { gap: 1.5rem; }
    .wrap    { flex-wrap: wrap; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .grid-auto { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
    .mt-1  { margin-top: .5rem; }  .mt-2  { margin-top: 1rem; }    .mt-3  { margin-top: 1.5rem; }
    .mb-1  { margin-bottom: .5rem; }.mb-2  { margin-bottom: 1rem; } .mb-3  { margin-bottom: 1.5rem; }
    .text-muted  { color: var(--text-muted); }
    .text-sm     { font-size: .8rem; }
    .fw-bold     { font-weight: 700; }
    .text-center { text-align: center; }
    .w-full      { width: 100%; }
    .hidden      { display: none !important; }
  </style>

  {% block extra_head %}{% endblock %}
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav class="sidebar" id="sidebar">

  <!-- Brand -->
  <div class="sidebar-brand">
    <div class="brand-icon">
      <img src="{% static 'img/fcespad.jpg' %}" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙÙˆØªØ³Ø§Ù„ Ø§Ø³Ù¾Ø§Ø¯">
    </div>
    <div class="brand-text">
      <div class="brand-name">Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø§Ø³Ù¾Ø§Ø¯</div>
      <div class="brand-sub">Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ø§Ù…Ø¹</div>
    </div>
  </div>

  <!-- User Badge -->
  {% if request.user.is_authenticated %}
  <div class="user-badge">
    <div class="user-avatar">
      {{ request.user.first_name|slice:":1" }}{{ request.user.last_name|slice:":1" }}
    </div>
    <div class="user-info">
      <div class="user-name">{{ request.user.get_full_name }}</div>
      <div class="user-role">
        {% if request.user.is_technical_director %}Ù…Ø¯ÛŒØ± ÙÙ†ÛŒ
        {% elif request.user.is_finance_manager %}Ù…Ø¯ÛŒØ± Ù…Ø§Ù„ÛŒ
        {% elif request.user.is_coach %}Ù…Ø±Ø¨ÛŒ
        {% elif request.user.is_player %}Ø¨Ø§Ø²ÛŒÚ©Ù†
        {% else %}Ú©Ø§Ø±Ø¨Ø±{% endif %}
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Navigation -->
  <div class="sidebar-nav">

    <!-- â”€â”€â”€ Ù‡Ù…Ù‡ Ù†Ù‚Ø´â€ŒÙ‡Ø§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="nav-section">
      <div class="nav-label">Ø¹Ù…ÙˆÙ…ÛŒ</div>
    </div>
    <a href="{% url 'accounts:dashboard' %}"
       class="nav-item {% block nav_dashboard %}{% endblock %}">
      <span class="nav-icon">ğŸ </span> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
    </a>

    <!-- â”€â”€â”€ Ù…Ø¯ÛŒØ± ÙÙ†ÛŒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    {% if request.user.is_technical_director or request.user.is_superuser %}
    <div class="nav-section">
      <div class="nav-label">Ù…Ø¯ÛŒØ±ÛŒØª ÙÙ†ÛŒ</div>
    </div>
    <a href="{% url 'training:player-list' %}"
       class="nav-item {% block nav_players %}{% endblock %}">
      <span class="nav-icon">ğŸ‘¥</span> Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†
    </a>
    <a href="{% url 'registration:applicant-list' %}"
       class="nav-item {% block nav_applicants %}{% endblock %}">
      <span class="nav-icon">ğŸ“‹</span> Ù…ØªÙ‚Ø§Ø¶ÛŒØ§Ù† Ø¬Ø¯ÛŒØ¯
    </a>
    <a href="{% url 'training:category-list' %}"
       class="nav-item {% block nav_categories %}{% endblock %}">
      <span class="nav-icon">ğŸ—‚ï¸</span> Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ
    </a>
    <a href="{% url 'training:coach-list' %}"
       class="nav-item {% block nav_coaches %}{% endblock %}">
      <span class="nav-icon">ğŸƒ</span> Ù…Ø±Ø¨ÛŒØ§Ù†
    </a>
    <a href="{% url 'registration:bulk-import' %}"
       class="nav-item {% block nav_import %}{% endblock %}">
      <span class="nav-icon">ğŸ“¥</span> Ø§ÛŒÙ…Ù¾ÙˆØ±Øª Ø§Ø² Ø§Ú©Ø³Ù„
    </a>
    <a href="{% url 'exercises:gallery' %}"
       class="nav-item {% block nav_exercises %}{% endblock %}">
      <span class="nav-icon">ğŸ¯</span> Ù…Ø®Ø²Ù† ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§
    </a>
    {% endif %}

    <!-- â”€â”€â”€ Ù…Ø±Ø¨ÛŒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    {% if request.user.is_coach or request.user.is_technical_director or request.user.is_superuser %}
    <div class="nav-section">
      <div class="nav-label">ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§</div>
    </div>
    {# Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ù†ÛŒØ§Ø² Ø¨Ù‡ category_pk Ø¯Ø§Ø±Ø¯ â€” ØªØ§ Ø²Ù…Ø§Ù† Ø³Ø§Ø®Øª ØµÙØ­Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡ØŒ Ø¨Ù‡ Ù„ÛŒØ³Øª Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ø¯Ø± Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØ±ÙˆØ¯ #}
    <a href="{% url 'training:attendance-select' %}"
       class="nav-item {% block nav_attendance %}{% endblock %}">
      <span class="nav-icon">ğŸ“…</span> Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨
    </a>
    <a href="{% url 'comms:announcement-list' %}"
       class="nav-item {% block nav_announcements %}{% endblock %}">
      <span class="nav-icon">ğŸ“£</span> Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§
    </a>
    {% endif %}

    <!-- â”€â”€â”€ Ù…Ø¯ÛŒØ± Ù…Ø§Ù„ÛŒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    {% if request.user.is_finance_manager or request.user.is_technical_director or request.user.is_superuser %}
    <div class="nav-section">
      <div class="nav-label">Ù…Ø§Ù„ÛŒ</div>
    </div>
    <a href="{% url 'payroll:finance-dashboard' %}"
       class="nav-item {% block nav_finance %}{% endblock %}">
      <span class="nav-icon">ğŸ’°</span> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„ÛŒ
    </a>
    {# ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ Ùˆ Ø­Ù‚ÙˆÙ‚ Ù†ÛŒØ§Ø² Ø¨Ù‡ category_pk Ø¯Ø§Ø±Ù†Ø¯ â€” Ø§Ø² Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯ #}
    <a href="{% url 'payroll:finance-dashboard' %}#invoices"
       class="nav-item {% block nav_invoices %}{% endblock %}">
      <span class="nav-icon">ğŸ§¾</span> ÙØ§Ú©ØªÙˆØ±Ù‡Ø§
    </a>
    <a href="{% url 'payroll:finance-dashboard' %}#salaries"
       class="nav-item {% block nav_salaries %}{% endblock %}">
      <span class="nav-icon">ğŸ’³</span> Ø­Ù‚ÙˆÙ‚ Ù…Ø±Ø¨ÛŒØ§Ù†
    </a>
    <a href="{% url 'payroll:expense-list' %}"
       class="nav-item {% block nav_expenses %}{% endblock %}">
      <span class="nav-icon">ğŸ“Š</span> Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§
    </a>
    {% endif %}

    <!-- â”€â”€â”€ Ø¨Ø§Ø²ÛŒÚ©Ù† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    {% if request.user.is_player %}
    <div class="nav-section">
      <div class="nav-label">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†</div>
    </div>
    <a href="{% url 'training:my-profile' %}"
       class="nav-item {% block nav_my_profile %}{% endblock %}">
      <span class="nav-icon">ğŸ‘¤</span> Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†
    </a>
    <a href="{% url 'payroll:finance-dashboard' %}"
       class="nav-item {% block nav_my_invoices %}{% endblock %}">
      <span class="nav-icon">ğŸ§¾</span> ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ÛŒ Ù…Ù†
    </a>
    <a href="{% url 'training:attendance-select' %}"
       class="nav-item {% block nav_my_attendance %}{% endblock %}">
      <span class="nav-icon">ğŸ“…</span> Ø­Ø¶ÙˆØ± Ù…Ù†
    </a>
    {% endif %}

    <!-- â”€â”€â”€ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="nav-section" style="margin-top:.5rem">
      <div class="nav-label">Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§</div>
    </div>
    <a href="{% url 'comms:notification-list' %}"
       class="nav-item {% block nav_notifications %}{% endblock %}">
      <span class="nav-icon">ğŸ””</span> Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ù†
      {% if unread_notif_count %}
        <span class="nav-badge">{{ unread_notif_count }}</span>
      {% endif %}
    </a>

  </div><!-- /sidebar-nav -->

  <!-- Footer -->
  <div class="sidebar-footer">
    <a href="{% url 'accounts:password-change' %}">
      <span>ğŸ”‘</span> ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
    </a>
    <a href="{% url 'accounts:logout' %}" style="margin-top:.1rem">
      <span>ğŸšª</span> Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
    </a>
  </div>
</nav>

<!-- â”€â”€ Sidebar Overlay (mobile) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="sidebar-overlay"
     style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:99"
     onclick="closeSidebar()"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN WRAPPER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main-wrapper" id="main-wrapper">

  <!-- â”€â”€ Topbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header class="topbar">
    <button class="topbar-toggle" onclick="toggleSidebar()" aria-label="Ù…Ù†Ùˆ">â˜°</button>

    <nav class="topbar-breadcrumb">
      <a href="{% url 'accounts:dashboard' %}" style="text-decoration:none;color:inherit">Ø®Ø§Ù†Ù‡</a>
      {% block breadcrumb %}{% endblock %}
    </nav>

    <div class="topbar-actions">
      <!-- Notification Bell -->
      <button class="notif-btn" id="notif-btn" onclick="toggleNotifDropdown()"
              aria-label="Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§">
        ğŸ””
        {% if unread_notif_count %}
          <span class="notif-count">{{ unread_notif_count }}</span>
        {% endif %}
      </button>

      <!-- Notification Dropdown -->
      <div class="notif-dropdown" id="notif-dropdown">
        <div class="notif-header">
          <h3>ğŸ”” Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§</h3>
          <a href="{% url 'comms:notification-read-all' %}"
             class="notif-mark-all"
             onclick="event.preventDefault();markAllRead(this)">
            Ù‡Ù…Ù‡ Ø±Ø§ Ø®ÙˆØ§Ù†Ø¯Ù…
          </a>
        </div>
        <div class="notif-list" id="notif-list">
          {% if recent_notifications %}
            {% for n in recent_notifications %}
            <a href="{% url 'comms:notification-read' n.pk %}"
               class="notif-item {% if not n.is_read %}unread{% else %}read{% endif %}"
               data-id="{{ n.pk }}">
              <div class="notif-dot"></div>
              <div class="notif-content">
                <div class="notif-title">{{ n.title }}</div>
                <div class="notif-msg">{{ n.message|truncatechars:80 }}</div>
                <div class="notif-time">{{ n.created_at|timesince }} Ù¾ÛŒØ´</div>
              </div>
            </a>
            {% endfor %}
          {% else %}
            <div class="notif-empty">Ù‡ÛŒÚ† Ø§Ø¹Ù„Ø§Ù†ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯ ğŸ‰</div>
          {% endif %}
        </div>
      </div>
    </div>
  </header>

  <!-- â”€â”€ Django Messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  {% if messages %}
  <div class="django-messages">
    {% for msg in messages %}
    <div class="alert alert-{% if msg.tags == 'error' %}danger{% else %}{{ msg.tags }}{% endif %} mb-1"
         style="margin-bottom:.5rem">
      <span class="alert-icon">
        {% if msg.tags == 'success' %}âœ…{% elif msg.tags == 'error' or msg.tags == 'danger' %}âŒ{% elif msg.tags == 'warning' %}âš ï¸{% else %}â„¹ï¸{% endif %}
      </span>
      {{ msg }}
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- â”€â”€ Page Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main class="page-content">
    {% block content %}{% endblock %}
  </main>

  <footer style="padding:1rem 1.75rem;border-top:1px solid var(--surface-2);font-size:.75rem;color:var(--text-light);text-align:center">
    Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙÙˆØªØ³Ø§Ù„ &copy; Û±Û´Û°Û³
  </footer>

</div><!-- /main-wrapper -->

<!-- â”€â”€ Loading Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="loading-overlay" id="loading-overlay">
  <div class="spinner"></div>
</div>

<!-- â”€â”€ Toast Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="toast-container" id="toast-container"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GLOBAL JS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toggleSidebar() {
  const s = document.getElementById("sidebar");
  const o = document.getElementById("sidebar-overlay");
  s.classList.toggle("open");
  o.style.display = s.classList.contains("open") ? "block" : "none";
}
function closeSidebar() {
  document.getElementById("sidebar").classList.remove("open");
  document.getElementById("sidebar-overlay").style.display = "none";
}

/* â”€â”€ Notification Dropdown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toggleNotifDropdown() {
  document.getElementById("notif-dropdown").classList.toggle("open");
}
document.addEventListener("click", e => {
  if (!e.target.closest("#notif-btn") && !e.target.closest("#notif-dropdown")) {
    document.getElementById("notif-dropdown")?.classList.remove("open");
  }
});

async function markAllRead(anchor) {
  try {
    await fetch("{% url 'comms:notification-read-all' %}", {
      method: "POST",
      headers: { "X-CSRFToken": getCookie("csrftoken") },
    });
    document.querySelectorAll(".notif-item.unread").forEach(el => {
      el.classList.replace("unread", "read");
    });
    document.querySelectorAll(".notif-count, .nav-badge").forEach(el => el.remove());
    toast("Ù‡Ù…Ù‡ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯Ù†Ø¯ âœ“", "success");
  } catch { toast("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±", "error"); }
}

/* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toast(message, type = "success", duration = 3500) {
  const container = document.getElementById("toast-container");
  const el = document.createElement("div");
  const icons = { success: "âœ…", error: "âŒ", warning: "âš ï¸", info: "â„¹ï¸" };
  el.className = `toast ${type}`;
  el.innerHTML = `<span>${icons[type] || "â„¹ï¸"}</span><span>${message}</span>`;
  container.appendChild(el);
  setTimeout(() => {
    el.classList.add("out");
    setTimeout(() => el.remove(), 300);
  }, duration);
}

/* â”€â”€ Loading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showLoading()  { document.getElementById("loading-overlay").classList.add("show"); }
function hideLoading()  { document.getElementById("loading-overlay").classList.remove("show"); }

/* â”€â”€ CSRF Helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function getCookie(name) {
  const m = document.cookie.match("(^|;)\\s*" + name + "\\s*=\\s*([^;]+)");
  return m ? m.pop() : "";
}

/* â”€â”€ Fetch wrapper with CSRF â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function apiPost(url, data = {}) {
  const res = await fetch(url, {
    method:  "POST",
    headers: {
      "Content-Type": "application/json",
      "X-CSRFToken":  getCookie("csrftoken"),
    },
    body: JSON.stringify(data),
  });
  return res.json();
}

/* â”€â”€ Confirm Dialog â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function confirmAction(message, onConfirm) {
  if (window.confirm(message)) onConfirm();
}
</script>

{% block extra_js %}{% endblock %}
</body>
</html>